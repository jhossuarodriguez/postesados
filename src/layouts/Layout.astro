---
import "@/styles/global.css";
import Analytics from "@vercel/analytics/astro";
import ClientRouter from "astro/components/ClientRouter.astro";
---

<!doctype html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.ico" />
		<title>Postesados</title>
		<link
			rel="icon"
			type="image/png"
			href="/favicon-96x96.png"
			sizes="96x96"
		/>
		<!-- Preload fuentes críticas para LCP -->
		<link rel="preload" href="/fonts/montserrat-v31-latin-700.woff2" as="font" type="font/woff2" crossorigin />
		<link rel="preload" href="/fonts/montserrat-v31-latin-regular.woff2" as="font" type="font/woff2" crossorigin />
		<ClientRouter />
	</head>
	<body class="w-full mx-auto px-2 lg:px-5">
		<slot />
		<Analytics />
	</body>

	<script>
		import { animate, stagger, inView } from "motion"

		document.addEventListener("astro:page-load", () => {
			// Ocultar hijos de cada sección antes de animar
			document.querySelectorAll("section > *, footer > *").forEach((el) => {
				;(el as HTMLElement).style.opacity = "0"
			})

			inView("section, footer", (section) => {
				const children = section.querySelectorAll(":scope > *")
				animate(
					children,
					{ opacity: [0, 1], y: [24, 0] },
					{ duration: 1, ease: [0.16, 1, 0.3, 1], delay: stagger(0.12) }
				)
			}, { amount: 0.08 })
		})
	</script>
</html>

<style>
	html {
		margin: 0;
		width: 100%;
		height: 100%;
		font-family: "Montserrat", sans-serif;
	}

	body {
		margin: 0;
		width: 100%;
		height: 100%;
		font-family: "Montserrat", sans-serif;
		overflow-y: scroll;
	}
</style>
