---
import "@/styles/global.css";
import Analytics from "@vercel/analytics/astro";
import ClientRouter from "astro/components/ClientRouter.astro";
---

<!doctype html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.ico" />
		<title>Postesados</title>
		<link
			rel="icon"
			type="image/png"
			href="/favicon-96x96.png"
			sizes="96x96"
		/>
		<!-- Preload fuentes crÃ­ticas para LCP -->
		<link rel="preload" href="/fonts/montserrat-v31-latin-700.woff2" as="font" type="font/woff2" crossorigin />
		<link rel="preload" href="/fonts/montserrat-v31-latin-regular.woff2" as="font" type="font/woff2" crossorigin />
		<ClientRouter />
	</head>
	<body class="w-full mx-auto px-2 lg:px-5">
		<slot />
		<Analytics />
	</body>

	<script>
		import { animate, inView } from "motion"

		document.addEventListener("astro:page-load", () => {
			const sections = document.querySelectorAll("body > section, body > div > section")

			sections.forEach((section) => {
				const el = section as HTMLElement
				el.style.opacity = "0"
				el.style.transform = "translateY(60px)"

				inView(el, () => {
					animate(
						el,
						{ opacity: [0, 1], y: [60, 0] } as any,
						{ duration: 0.9, ease: [0.22, 1, 0.36, 1] }
					)

					return () => {
						animate(
							el,
							{ opacity: [1, 0], y: [0, 60] } as any,
							{ duration: 0.3, ease: [0.22, 1, 0.36, 1] }
						)
					}
				}, { amount: 0.2 })
			})
		})
	</script>
</html>

<style>
	html {
		margin: 0;
		width: 100%;
		height: 100%;
		font-family: "Montserrat", sans-serif;
	}

	body {
		margin: 0;
		width: 100%;
		height: 100%;
		font-family: "Montserrat", sans-serif;
		overflow-y: scroll;
		scroll-snap-type: y proximity;
	}

	body > :global(section),
	body > :global(div > section) {
		scroll-snap-align: start;
	}
</style>
